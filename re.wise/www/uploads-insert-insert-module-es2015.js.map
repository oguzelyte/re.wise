{"version":3,"sources":["./src/app/uploads/insert/insert.page.html","./src/app/upload.ts","./src/app/uploads/insert/insert-routing.module.ts","./src/app/uploads/insert/insert.module.ts","./src/app/uploads/insert/insert.page.scss","./src/app/uploads/insert/insert.page.ts"],"names":[],"mappings":"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","file":"uploads-insert-insert-module-es2015.js","sourcesContent":["export default \"<!-- Back button with a default href -->\\n<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button\\n      icon=\\\"close\\\"\\n      defaultHref=\\\"/tabs/tab1\\\">\\n    </ion-back-button>\\n    </ion-buttons>\\n    <ion-title>  Upload File </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <form #myForm=\\\"ngForm\\\"> \\n    <ion-item lines=\\\"full\\\">\\n      <ion-label position=\\\"floating\\\">Title</ion-label>\\n      <ion-input type=\\\"text\\\" #title ngModel name=\\\"title\\\" required></ion-input>\\n    </ion-item>\\n\\n    <ion-item lines=\\\"full\\\">\\n      <ion-label position=\\\"floating\\\">Description</ion-label>\\n      <ion-textarea #description ngModel name=\\\"description\\\" required placeholder=\\\"Enter a description\\\"></ion-textarea>\\n    </ion-item>\\n\\n    <ion-item>\\n      <ion-label> Module Code </ion-label>\\n      <ion-select required ngModel name=\\\"moduleCode\\\" #moduleCode value={moduleSelected} okText=\\\"Okay\\\" cancelText=\\\"Dismiss\\\">\\n        <ion-select-option value=\\\"{{module}}\\\" *ngFor=\\\"let module of modules\\\"> {{module}}</ion-select-option>\\n      </ion-select>\\n    </ion-item>\\n\\n    <ion-item>\\n      <ion-label> Category </ion-label>\\n      <ion-select required ngModel name=\\\"category\\\" value={categorySelected} #category okText=\\\"Okay\\\" cancelText=\\\"Dismiss\\\">\\n        <ion-select-option value=\\\"{{category}}\\\" *ngFor=\\\"let category of categories\\\"> {{category}}</ion-select-option>\\n      </ion-select>\\n    </ion-item>\\n\\n<!-- \\nFIGURE OUT HOW TO SAVE FILES TO FIREBASE CLOUD STORAGE-->\\n\\n\\n    <ion-item lines=\\\"full\\\">\\n      <ion-label position=\\\"floating\\\">Tags (separated by a comma)</ion-label>\\n      <ion-input type=\\\"text\\\" #tags ngModel name=\\\"tags\\\" required></ion-input>\\n    </ion-item> \\n\\n\\n\\n    <ion-item lines=\\\"full\\\">\\n      <ion-label >File Upload (img, pdf, word or excel)</ion-label>\\n      <ion-input type=\\\"file\\\" accept=\\\"image/*, .pdf, .doc, .docx, .csv\\\" #file ngModel name=\\\"file\\\" required (change)=\\\"selectFile($event)\\\"></ion-input>\\n    </ion-item>\\n\\n\\n    <ion-row>\\n      <ion-col> \\n      <ion-button color=\\\"secondary\\\" type=\\\"submit\\\" [disabled]=\\\"myForm.invalid\\\" (click)=\\\"upload(title.value, description.value, moduleCode.value, category.value, tags.value)\\\" expand=\\\"block\\\">Upload File</ion-button>\\n      </ion-col>\\n    </ion-row>\\n  </form>\\n\\n    <div *ngIf=\\\"currentFileUpload\\\" class=\\\"progress\\\">\\n      <ion-progress-bar [value]=\\\"progress.percentage/100\\\"></ion-progress-bar>{{progress.percentage}}%\\n    </div>\\n</ion-content>\\n\"","export class Upload {\n    key: string;\n    name: string;\n    url: string;\n    file: File;\n \n    constructor(file: File) {\n        this.file = file;\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { InsertPage } from './insert.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: InsertPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class InsertPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { InsertPageRoutingModule } from './insert-routing.module';\n\nimport { InsertPage } from './insert.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    InsertPageRoutingModule\n  ],\n  declarations: [InsertPage]\n})\nexport class InsertPageModule {}\n","export default \".progress {\\n  padding: 20px;\\n  text-align: center;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdXBsb2Fkcy9pbnNlcnQvQzpcXFVzZXJzXFxPbGlcXERlc2t0b3BcXHJlLndpc2Uvc3JjXFxhcHBcXHVwbG9hZHNcXGluc2VydFxcaW5zZXJ0LnBhZ2Uuc2NzcyIsInNyYy9hcHAvdXBsb2Fkcy9pbnNlcnQvaW5zZXJ0LnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGFBQUE7RUFDQSxrQkFBQTtBQ0NKIiwiZmlsZSI6InNyYy9hcHAvdXBsb2Fkcy9pbnNlcnQvaW5zZXJ0LnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5wcm9ncmVzc3tcclxuICAgIHBhZGRpbmc6IDIwcHg7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbn0iLCIucHJvZ3Jlc3Mge1xuICBwYWRkaW5nOiAyMHB4O1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59Il19 */\"","import { Component, OnInit } from '@angular/core';\nimport { FirebaseOpService } from 'src/app/firebase-op.service';\nimport { Upload } from 'src/app/upload';\nimport { UploadFileService } from 'src/app/upload-file.service';\nimport { AngularFireDatabase } from '@angular/fire/database/database';\n\n@Component({\n  selector: 'app-insert',\n  templateUrl: './insert.page.html',\n  styleUrls: ['./insert.page.scss'],\n})\nexport class InsertPage implements OnInit {\n\n  modules: string[] = [];\n  categories: string[] = [\"Tutorial\", \"Summary\", \"Lecture Note\", \"Exam Answers\"];\n\n  selectedFiles: FileList;\n  currentFileUpload: Upload;\n  progress: { percentage: number } = { percentage: 0 };\n\n  constructor(\n    private firebaseOp: FirebaseOpService,\n    public uploadService: UploadFileService\n  ) {\n  }\n\n\n  ngOnInit() {\n    if (this.firebaseOp.getUser() != undefined) {\n      this.firebaseOp.getUser().subscribe((user) => {\n        this.firebaseOp.getModules(user.data()).subscribe((querySnapshot => {\n          querySnapshot.docs[0].ref.collection(\"courses\").where('id', '==', user.data().course)\n            .get().then(\n              (courses) => {\n                courses.forEach(course => {\n                  course.ref.collection(\"years\").where('year', '==', user.data().year)\n                    .get().then(\n                      (years) => {\n                        years.forEach(year => {\n                          year.ref.collection(\"modules\")\n                          .get().then(\n                            (modules) => {\n                              this.modules = [];\n                              modules.forEach(module => {\n                                this.modules.push(module.data().id);\n                              })\n                            }\n                          );\n                        });\n                      }\n                    )\n                });\n              });\n        }));;\n      });\n    }\n  }\n\n\n  selectFile(event) {\n    this.selectedFiles = event.target.files;\n    console.log(this.selectedFiles);\n  }\n\n  upload(title, description, moduleCode, category, tags) {\n    const file = this.selectedFiles.item(0);\n    this.selectedFiles = undefined;\n    this.currentFileUpload = new Upload(file);\n    this.uploadService.pushFileToStorage(this.currentFileUpload, this.progress, moduleCode, category, tags, title, description);\n  }\n}\n"],"sourceRoot":"webpack:///"}