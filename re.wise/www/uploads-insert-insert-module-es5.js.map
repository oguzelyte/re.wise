{"version":3,"sources":["src/app/uploads/insert/insert.page.html","src/app/upload.ts","src/app/uploads/insert/insert-routing.module.ts","src/app/uploads/insert/insert.module.ts","src/app/uploads/insert/insert.page.scss","src/app/uploads/insert/insert.page.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<!-- Back button with a default href -->\\n<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button\\n      icon=\\\"close\\\"\\n      defaultHref=\\\"/tabs/tab1\\\">\\n    </ion-back-button>\\n    </ion-buttons>\\n    <ion-title>  Upload File </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <form #myForm=\\\"ngForm\\\"> \\n    <ion-item lines=\\\"full\\\">\\n      <ion-label position=\\\"floating\\\">Title</ion-label>\\n      <ion-input type=\\\"text\\\" #title ngModel name=\\\"title\\\" required></ion-input>\\n    </ion-item>\\n\\n    <ion-item lines=\\\"full\\\">\\n      <ion-label position=\\\"floating\\\">Description</ion-label>\\n      <ion-textarea #description ngModel name=\\\"description\\\" required placeholder=\\\"Enter a description\\\"></ion-textarea>\\n    </ion-item>\\n\\n    <ion-item>\\n      <ion-label> Module Code </ion-label>\\n      <ion-select required ngModel name=\\\"moduleCode\\\" #moduleCode value={moduleSelected} okText=\\\"Okay\\\" cancelText=\\\"Dismiss\\\">\\n        <ion-select-option value=\\\"{{module}}\\\" *ngFor=\\\"let module of modules\\\"> {{module}}</ion-select-option>\\n      </ion-select>\\n    </ion-item>\\n\\n    <ion-item>\\n      <ion-label> Category </ion-label>\\n      <ion-select required ngModel name=\\\"category\\\" value={categorySelected} #category okText=\\\"Okay\\\" cancelText=\\\"Dismiss\\\">\\n        <ion-select-option value=\\\"{{category}}\\\" *ngFor=\\\"let category of categories\\\"> {{category}}</ion-select-option>\\n      </ion-select>\\n    </ion-item>\\n\\n<!-- \\nFIGURE OUT HOW TO SAVE FILES TO FIREBASE CLOUD STORAGE-->\\n\\n\\n    <ion-item lines=\\\"full\\\">\\n      <ion-label position=\\\"floating\\\">Tags (separated by a comma)</ion-label>\\n      <ion-input type=\\\"text\\\" #tags ngModel name=\\\"tags\\\" required></ion-input>\\n    </ion-item> \\n\\n\\n\\n    <ion-item lines=\\\"full\\\">\\n      <ion-label >File Upload (img, pdf, word or excel)</ion-label>\\n      <ion-input type=\\\"file\\\" accept=\\\"image/*, .pdf, .doc, .docx, .csv\\\" #file ngModel name=\\\"file\\\" required (change)=\\\"selectFile($event)\\\"></ion-input>\\n    </ion-item>\\n\\n\\n    <ion-row>\\n      <ion-col> \\n      <ion-button color=\\\"secondary\\\" type=\\\"submit\\\" [disabled]=\\\"myForm.invalid\\\" (click)=\\\"upload(title.value, description.value, moduleCode.value, category.value, tags.value)\\\" expand=\\\"block\\\">Upload File</ion-button>\\n      </ion-col>\\n    </ion-row>\\n  </form>\\n\\n    <div *ngIf=\\\"currentFileUpload\\\" class=\\\"progress\\\">\\n      <ion-progress-bar [value]=\\\"progress.percentage/100\\\"></ion-progress-bar>{{progress.percentage}}%\\n    </div>\\n</ion-content>\\n\"","export class Upload {\n    key: string;\n    name: string;\n    url: string;\n    file: File;\n \n    constructor(file: File) {\n        this.file = file;\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { InsertPage } from './insert.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: InsertPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class InsertPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { InsertPageRoutingModule } from './insert-routing.module';\n\nimport { InsertPage } from './insert.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    InsertPageRoutingModule\n  ],\n  declarations: [InsertPage]\n})\nexport class InsertPageModule {}\n","export default \".progress {\\n  padding: 20px;\\n  text-align: center;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdXBsb2Fkcy9pbnNlcnQvQzpcXFVzZXJzXFxPbGlcXERlc2t0b3BcXHJlLndpc2Uvc3JjXFxhcHBcXHVwbG9hZHNcXGluc2VydFxcaW5zZXJ0LnBhZ2Uuc2NzcyIsInNyYy9hcHAvdXBsb2Fkcy9pbnNlcnQvaW5zZXJ0LnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGFBQUE7RUFDQSxrQkFBQTtBQ0NKIiwiZmlsZSI6InNyYy9hcHAvdXBsb2Fkcy9pbnNlcnQvaW5zZXJ0LnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5wcm9ncmVzc3tcclxuICAgIHBhZGRpbmc6IDIwcHg7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbn0iLCIucHJvZ3Jlc3Mge1xuICBwYWRkaW5nOiAyMHB4O1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59Il19 */\"","import { Component, OnInit } from '@angular/core';\nimport { FirebaseOpService } from 'src/app/firebase-op.service';\nimport { Upload } from 'src/app/upload';\nimport { UploadFileService } from 'src/app/upload-file.service';\nimport { AngularFireDatabase } from '@angular/fire/database/database';\n\n@Component({\n  selector: 'app-insert',\n  templateUrl: './insert.page.html',\n  styleUrls: ['./insert.page.scss'],\n})\nexport class InsertPage implements OnInit {\n\n  modules: string[] = [];\n  categories: string[] = [\"Tutorial\", \"Summary\", \"Lecture Note\", \"Exam Answers\"];\n\n  selectedFiles: FileList;\n  currentFileUpload: Upload;\n  progress: { percentage: number } = { percentage: 0 };\n\n  constructor(\n    private firebaseOp: FirebaseOpService,\n    public uploadService: UploadFileService\n  ) {\n  }\n\n\n  ngOnInit() {\n    if (this.firebaseOp.getUser() != undefined) {\n      this.firebaseOp.getUser().subscribe((user) => {\n        this.firebaseOp.getModules(user.data()).subscribe((querySnapshot => {\n          querySnapshot.docs[0].ref.collection(\"courses\").where('id', '==', user.data().course)\n            .get().then(\n              (courses) => {\n                courses.forEach(course => {\n                  course.ref.collection(\"years\").where('year', '==', user.data().year)\n                    .get().then(\n                      (years) => {\n                        years.forEach(year => {\n                          year.ref.collection(\"modules\")\n                          .get().then(\n                            (modules) => {\n                              this.modules = [];\n                              modules.forEach(module => {\n                                this.modules.push(module.data().id);\n                              })\n                            }\n                          );\n                        });\n                      }\n                    )\n                });\n              });\n        }));;\n      });\n    }\n  }\n\n\n  selectFile(event) {\n    this.selectedFiles = event.target.files;\n    console.log(this.selectedFiles);\n  }\n\n  upload(title, description, moduleCode, category, tags) {\n    const file = this.selectedFiles.item(0);\n    this.selectedFiles = undefined;\n    this.currentFileUpload = new Upload(file);\n    this.uploadService.pushFileToStorage(this.currentFileUpload, this.progress, moduleCode, category, tags, title, description);\n  }\n}\n"],"sourceRoot":"webpack:///","file":"uploads-insert-insert-module-es5.js"}