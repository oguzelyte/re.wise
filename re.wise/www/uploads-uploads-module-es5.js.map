{"version":3,"sources":["src/app/uploads/uploads.page.html","src/app/uploads/uploads-routing.module.ts","src/app/uploads/uploads.module.ts","src/app/uploads/uploads.page.scss","src/app/uploads/uploads.page.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,IAAA,mBAAA,CAAA,CAAA,CAAA,mBAAA;AAAe;;;AAAA,IAAA,mBAAA,CAAA,SAAA,CAAA,GAAA,wqDAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACKf,QAAM,MAAM,GAAW,CACrB;AACE,MAAA,IAAI,EAAE,EADR;AAEE,MAAA,SAAS,EAAE,0CAAA,CAAA,aAAA;AAFb,KADqB,CAAvB;;AAWA,QAAa,wBAAb;AAAA;AAAA,KAAA;;AAAa,IAAA,wBAAwB,GAAA,kCAAA,CAAA,YAAA,CAAA,CAAA,CAJpC,MAAA,CAAA,0CAAA,CAAA,UAAA,CAAA,CAAA,CAAS;AACR,MAAA,OAAO,EAAE,CAAC,4CAAA,CAAA,cAAA,CAAA,CAAa,QAAb,CAAsB,MAAtB,CAAD,CADD;AAER,MAAA,OAAO,EAAE,CAAC,4CAAA,CAAA,cAAA,CAAD;AAFD,KAAT,CAIoC,CAAA,EAAxB,wBAAwB,CAAxB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACGb,QAAa,iBAAb;AAAA;AAAA,KAAA;;AAAa,IAAA,iBAAiB,GAAA,kCAAA,CAAA,YAAA,CAAA,CAAA,CAT7B,MAAA,CAAA,0CAAA,CAAA,UAAA,CAAA,CAAA,CAAS;AACR,MAAA,OAAO,EAAE,CACP,4CAAA,CAAA,cAAA,CADO,EAEP,2CAAA,CAAA,aAAA,CAFO,EAGP,2CAAA,CAAA,aAAA,CAHO,EAIP,oDAAA,CAAA,0BAAA,CAJO,CADD;AAOR,MAAA,YAAY,EAAE,CAAC,0CAAA,CAAA,aAAA,CAAD;AAPN,KAAT,CAS6B,CAAA,EAAjB,iBAAiB,CAAjB;;;;;;;;;;;;;;;;ACnBb,IAAA,mBAAA,CAAA,CAAA,CAAA,mBAAA;AAAe;;;AAAA,IAAA,mBAAA,CAAA,SAAA,CAAA,GAAA,k+CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACgBf,QAAa,WAAb;AAIE,4BACE;AACQ,MAAA,UAFV,EAGU,IAHV,EAIU,QAJV,EAKU,IALV,EAMU,cANV,EAOU,aAPV,EAO0C;AAAA;;AALhC,aAAA,UAAA,GAAA,UAAA;AACA,aAAA,IAAA,GAAA,IAAA;AACA,aAAA,QAAA,GAAA,QAAA;AACA,aAAA,IAAA,GAAA,IAAA;AACA,aAAA,cAAA,GAAA,cAAA;AACA,aAAA,aAAA,GAAA,aAAA;AATV,aAAA,OAAA,GAAiB,EAAjB;AAUK;;AAZP;AAAA;AAAA,mCAcU;AAAA;;AAEN,cAAI,KAAK,IAAL,CAAU,UAAd,EAA0B;AACtB,iBAAK,UAAL,CAAgB,OAAhB,CAAwB,IAAI,CAAC,KAAL,CAAW,YAAY,CAAC,OAAb,CAAqB,MAArB,CAAX,EAAyC,GAAjE,EAAsE,SAAtE,CAAgF,UAAC,IAAD,EAAS;AACvF,cAAA,KAAI,CAAC,OAAL,GAAe,EAAf,CADuF,CACpE;;AACnB,cAAA,IAAI,CAAC,OAAL,CAAa,UAAU,GAAV,EAAa;AACxB,oBAAI,OAAO,GAAG;AACZ,kBAAA,EAAE,EAAE,GAAG,CAAC,OAAJ,CAAY,GAAZ,CAAgB,EADR;AAEZ,kBAAA,IAAI,EAAE,GAAG,CAAC,OAAJ,CAAY,GAAZ,CAAgB,IAAhB;AAFM,iBAAd;AAIA,qBAAK,OAAL,CAAa,IAAb,CAAkB,OAAlB;AACD,eANY,CAMX,IANW,CAMN,KANM,CAAb;AAOD,aATD;AAUH;;AAAA;AACF;AA5BH;AAAA;AAAA,iCA8BW,GA9BX,EA8BwB,QA9BxB,EA8BwC;AACpC,cAAM,YAAY,GAAuB,KAAK,QAAL,CAAc,MAAd,EAAzC;AACA,UAAA,YAAY,CAAC,QAAb,CAAsB,GAAtB,EAA2B,KAAK,IAAL,CAAU,aAAV,GAA0B,QAArD,EAA+D,IAA/D,CAAoE,UAAC,KAAD,EAAU;AAC5E,YAAA,OAAO,CAAC,GAAR,CAAY,wBAAwB,KAAK,CAAC,KAAN,EAApC;AACD,WAFD,EAEG,UAAC,KAAD,EAAU;AACX,YAAA,OAAO,CAAC,GAAR,CAAY,KAAZ;AACD,WAJD;AAKD;AArCH;AAAA;AAAA,kCAuCY,IAvCZ,EAuCwB;AACpB,UAAA,IAAI,CAAC,KAAL,CAAW,GAAX;AACD;AAzCH;AAAA;AAAA,gCA2CS,MA3CT,EA2CyB,UA3CzB,EA2C6C,QA3C7C,EA2C+D,IA3C/D,EA2C2E;AACvE,eAAK,aAAL,CAAmB,iBAAnB,CAAqC,MAArC,EAA6C,UAA7C,EAAyD,QAAzD,EAAmE,IAAnE;AACD;AA7CH;AAAA;AAAA,gCA+CU,GA/CV,EA+CqB;AACjB,eAAK,cAAL,CAAoB,OAApB,CAA4B,GAA5B,EACD,IADC,CACI,UAAC,GAAD;AAAA,mBAAc,OAAO,CAAC,GAAR,CAAY,GAAZ,CAAd;AAAA,WADJ,WAEK,UAAC,KAAD;AAAA,mBAAgB,OAAO,CAAC,KAAR,CAAc,KAAd,CAAhB;AAAA,WAFL;AAGD;AAnDH;;AAAA;AAAA,OAAA;;;;cAMwB,iDAAA,CAAA,mBAAA;;cACN,kDAAA,CAAA,qBAAA;;cACI,4DAAA,CAAA,cAAA;;cACJ,mDAAA,CAAA,MAAA;;cACU,+DAAA,CAAA,gBAAA;;cACD,iDAAA,CAAA,mBAAA;;;;AAXd,IAAA,WAAW,GAAA,kCAAA,CAAA,YAAA,CAAA,CAAA,CALvB,MAAA,CAAA,0CAAA,CAAA,WAAA,CAAA,CAAA,CAAU;AACT,MAAA,QAAQ,EAAE,aADD;AAET,MAAA,QAAA,EAAA,kCAAA,CAAA,iBAAA,CAAA,CAAA,mBAAA;AAAA;AAAA,iFAAA,CAAA,YAFS;;;;AAAA,KAAV,CAKuB,E,uEAMA,iDAAA,CAAA,mBAAA,C,EACN,kDAAA,CAAA,qBAAA,C,EACI,4DAAA,CAAA,cAAA,C,EACJ,mDAAA,CAAA,MAAA,C,EACU,+DAAA,CAAA,gBAAA,C,EACD,iDAAA,CAAA,mBAAA,C,EAXH,CAAA,EAAX,WAAW,CAAX","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>uploads</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-row>\\n    <ion-col>\\n      <div *ngIf=\\\"uploads.length==0\\\">\\n        <h3>You haven't got any uploads, try uploading some.</h3>\\n      </div>\\n    </ion-col>\\n  </ion-row>\\n  <div *ngFor=\\\"let file of uploads\\\">\\n    <ion-card>\\n      <ion-item>\\n        <ion-label>\\n          <h3>{{file.data.moduleCode}} | {{file.data.category}}</h3>\\n        </ion-label>\\n      </ion-item>\\n      <ion-card-header>\\n        <ion-card-title>{{file.data.name}}</ion-card-title>\\n      </ion-card-header>\\n      <ion-card-content>\\n        {{file.data.description}}\\n        <div class=\\\"tags\\\">\\n          <div class=\\\"tag\\\" *ngFor=\\\"let tag of file.data.tags.split(',')\\\">\\n            {{tag}}\\n          </div>\\n        </div>\\n        <div class=\\\"actions\\\">\\n          <ion-button (click)=\\\"preview(file.data.url)\\\"> <ion-icon name=\\\"eye-outline\\\" slot=\\\"start\\\"></ion-icon> VIEW</ion-button>\\n          <ion-button (click)=\\\"download(file.data.url, file.data.name)\\\"> <ion-icon name=\\\"download-outline\\\" slot=\\\"start\\\"></ion-icon>  DOWNLOAD </ion-button>\\n          <ion-button (click)=\\\"delete(file.id, file.data.moduleCode, file.data.category, file.data.name)\\\"> <ion-icon name=\\\"trash-outline\\\" slot=\\\"start\\\"></ion-icon>  DELETE </ion-button>\\n        </div>\\n        \\n      </ion-card-content>\\n    </ion-card>\\n  </div>\\n\\n  <!-- fab placed to the bottom end -->\\n  <ion-fab vertical=\\\"bottom\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\">\\n    <ion-fab-button  [routerLink]=\\\"['/insert']\\\">\\n      <ion-icon name=\\\"add\\\"></ion-icon>\\n    </ion-fab-button>\\n  </ion-fab>\\n\\n</ion-content>\\n\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { UploadsPage } from './uploads.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: UploadsPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class UploadsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { UploadsPageRoutingModule } from './uploads-routing.module';\n\nimport { UploadsPage } from './uploads.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    UploadsPageRoutingModule\n  ],\n  declarations: [UploadsPage]\n})\nexport class UploadsPageModule {}\n","export default \".tag {\\n  background-color: var(--ion-color-secondary) !important;\\n  color: black;\\n  border-radius: 12px;\\n  margin: 2px 2px 2px 2px;\\n  padding: 2px 7px 2px 7px;\\n  display: inline-block;\\n}\\n\\n.tags {\\n  margin: 10px 0px 10px 0px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdXBsb2Fkcy9DOlxcVXNlcnNcXE9saVxcRGVza3RvcFxccmUud2lzZS9zcmNcXGFwcFxcdXBsb2Fkc1xcdXBsb2Fkcy5wYWdlLnNjc3MiLCJzcmMvYXBwL3VwbG9hZHMvdXBsb2Fkcy5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSx1REFBQTtFQUNBLFlBQUE7RUFDQSxtQkFBQTtFQUNBLHVCQUFBO0VBQ0Esd0JBQUE7RUFDQSxxQkFBQTtBQ0NKOztBREVBO0VBQ0kseUJBQUE7QUNDSiIsImZpbGUiOiJzcmMvYXBwL3VwbG9hZHMvdXBsb2Fkcy5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIudGFne1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0taW9uLWNvbG9yLXNlY29uZGFyeSkgIWltcG9ydGFudDtcclxuICAgIGNvbG9yOiBibGFjaztcclxuICAgIGJvcmRlci1yYWRpdXM6IDEycHg7XHJcbiAgICBtYXJnaW46MnB4IDJweCAycHggMnB4O1xyXG4gICAgcGFkZGluZzoycHggN3B4IDJweCA3cHg7XHJcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbn1cclxuXHJcbi50YWdze1xyXG4gICAgbWFyZ2luOjEwcHggMHB4IDEwcHggMHB4O1xyXG4gICAgLy9jbGVhcjpib3RoO1xyXG59XHJcblxyXG4uYWN0aW9uc3tcclxuICAgIC8vY2xlYXI6Ym90aDtcclxufSIsIi50YWcge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1pb24tY29sb3Itc2Vjb25kYXJ5KSAhaW1wb3J0YW50O1xuICBjb2xvcjogYmxhY2s7XG4gIGJvcmRlci1yYWRpdXM6IDEycHg7XG4gIG1hcmdpbjogMnB4IDJweCAycHggMnB4O1xuICBwYWRkaW5nOiAycHggN3B4IDJweCA3cHg7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbn1cblxuLnRhZ3Mge1xuICBtYXJnaW46IDEwcHggMHB4IDEwcHggMHB4O1xufSJdfQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { UploadFileService } from '../upload-file.service';\nimport { map } from 'rxjs/operators';\nimport { AuthenticateService } from '../authenticate.service';\nimport { FirebaseOpService } from '../firebase-op.service';\nimport { AngularFireDatabase } from '@angular/fire/database/database';\nimport * as firebase from 'firebase';\nimport { FileTransfer, FileUploadOptions, FileTransferObject } from '@ionic-native/file-transfer/ngx';\nimport { File } from '@ionic-native/file/ngx';\nimport { PreviewAnyFile } from '@ionic-native/preview-any-file/ngx';\n\n@Component({\n  selector: 'app-uploads',\n  templateUrl: './uploads.page.html',\n  styleUrls: ['./uploads.page.scss'],\n})\nexport class UploadsPage implements OnInit {\n\n  uploads: any[] = [];\n\n  constructor(\n    //public uploadService: UploadFileService,\n    private firebaseOp: FirebaseOpService,\n    private auth: AuthenticateService,\n    private transfer: FileTransfer,\n    private file: File,\n    private previewAnyFile: PreviewAnyFile,\n    private uploadService: UploadFileService\n  ) { }\n\n  ngOnInit() {\n    \n    if (this.auth.isLoggedIn) {\n        this.firebaseOp.getLogs(JSON.parse(localStorage.getItem(\"user\")).uid).subscribe((logs) => {\n          this.uploads = []; // emply uploads so that duplicates don't get pushed in\n          logs.forEach(function (log) {\n            let tempLog = {\n              id: log.payload.doc.id,\n              data: log.payload.doc.data()\n            }\n            this.uploads.push(tempLog);\n          }.bind(this));\n        })\n    };\n  }\n\n  download(url: string, fileName: string) {\n    const fileTransfer: FileTransferObject = this.transfer.create();\n    fileTransfer.download(url, this.file.dataDirectory + fileName).then((entry) => {\n      console.log('download complete: ' + entry.toURL());\n    }, (error) => {\n      console.log(error);\n    });\n  }\n\n  splitTags(tags: string){\n    tags.split(',')\n  }\n\n  delete(fileID: string, moduleCode: string, category: string, name: string){\n    this.uploadService.deleteFileStorage(fileID, moduleCode, category, name);\n  }\n\n  preview(url: string){\n    this.previewAnyFile.preview(url)\n  .then((res: any) => console.log(res))\n  .catch((error: any) => console.error(error));\n  }\n\n  \n}\n"],"sourceRoot":"webpack:///","file":"uploads-uploads-module-es5.js"}